<div class="container-centered">
  <mat-card class="login-container">
    <div class="title-container">
      <h1 class="title">Sign in</h1>
    </div>

    <mat-card-content>
      <form [formGroup]="form" (ngSubmit)="signInWithEmailAndPassword()">
        <mat-form-field
          [hideRequiredMarker]="true"
          class="full-width"
          appearance="outline"
        >
          <mat-label>Email</mat-label>
          <input
            matInput
            type="email"
            formControlName="email"
            placeholder="Enter your email"
            required
          />
          <mat-error *ngIf="email?.touched && email?.dirty">
            {{ getEmailError() }}
          </mat-error>
        </mat-form-field>

        <mat-form-field
          [hideRequiredMarker]="true"
          class="full-width"
          appearance="outline"
        >
          <mat-label>Password</mat-label>
          <input
            matInput
            formControlName="password"
            [type]="hide ? 'password' : 'text'"
            placeholder="Enter your password"
            required
          />
          <button
            mat-icon-button
            matSuffix
            aria-label="Toggle visibility"
            matTooltip="Toggle visibility"
          >
            <mat-icon (click)="hide = !hide">
              {{ hide ? "visibility_off" : "visibility" }}
            </mat-icon>
          </button>
          <mat-error
            *ngIf="password?.invalid && (password?.touched || password?.dirty)"
          >
            {{ getPasswordError() }}
          </mat-error>
        </mat-form-field>

        <ng-container *ngIf="invalidLoginAttempt">
          <div class="err-res-container">
            <span>Invalid email or password</span>
          </div>
        </ng-container>

        <button
          mat-raised-button
          color="primary"
          class="login-btn"
          [disabled]="form.invalid"
          (click)="signInWithEmailAndPassword()"
        >
          Sign in
        </button>
      </form>
    </mat-card-content>

    <div class="section-break-container">
      <div class="section-break-line"></div>
      <span>OR</span>
      <div class="section-break-line"></div>
    </div>

    <div class="social-logins-container">
      <!-- TODO: Use the appropiate Google icon based on the current theme (i.e. light or dark) -->

      <!-- <div class="social-login- btn">
        <img src="assets/google/btn_google_light_normal_ios.svg" alt="" />
        <span>Sign in with Google</span>
      </div> -->
      <button mat-stroked-button (click)="signInWithGoogle()">
        <img src="assets/google/google.ico" alt="Google icon" />
        Sign in with Google
      </button>
    </div>

    <div class="signup-link-container">
      <span>Don't have an account?</span>
      <a class="signup-link" routerLink="/register">Sign up</a>
    </div>
  </mat-card>
</div>
