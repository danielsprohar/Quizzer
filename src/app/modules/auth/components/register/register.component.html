<div class="register-container">
  <mat-card>
    <div class="title-container">
      <h1 class="title">Create a new account</h1>
    </div>
    <mat-card-content>
      <form [formGroup]="form">
        <div class="form-field-container">
          <mat-form-field
            [hideRequiredMarker]="true"
            class="full-width"
            appearance="outline"
          >
            <mat-label>Email</mat-label>
            <input
              type="email"
              matInput
              placeholder="Enter your email"
              formControlName="email"
              required
            />
            <mat-error *ngIf="email.invalid && (email.touched || email.dirty)">
              {{ getEmailError() }}
            </mat-error>
          </mat-form-field>

          <mat-form-field
            [hideRequiredMarker]="true"
            class="full-width"
            appearance="outline"
          >
            <mat-label>Password</mat-label>
            <input
              matInput
              placeholder="Enter your password"
              [type]="hidePassword ? 'password' : 'text'"
              formControlName="password"
              required
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hidePassword = !hidePassword"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hidePassword"
            >
              <mat-icon>
                {{ hidePassword ? "visibility_off" : "visibility" }}
              </mat-icon>
            </button>
          </mat-form-field>

          <mat-form-field
            [hideRequiredMarker]="true"
            class="full-width"
            appearance="outline"
          >
            <mat-label>Confirm Password</mat-label>
            <input
              matInput
              placeholder="Repeat your password"
              [type]="hideConfirmPassword ? 'password' : 'text'"
              formControlName="confirmPassword"
              required
            />
            <button
              mat-icon-button
              matSuffix
              (click)="hideConfirmPassword = !hideConfirmPassword"
              [attr.aria-label]="'Hide password'"
              [attr.aria-pressed]="hideConfirmPassword"
            >
              <mat-icon>
                {{ hideConfirmPassword ? "visibility_off" : "visibility" }}
              </mat-icon>
            </button>
            <mat-error
              *ngIf="
                confirmPassword.invalid &&
                (confirmPassword.touched || confirmPassword.dirty)
              "
            >
              {{ getConfirmPasswordError() }}
            </mat-error>
          </mat-form-field>

          <div class="pwd-hint-container">
            <p>Password must contain at least:</p>
            <ul>
              <li>one uppercase</li>
              <li>one lowercase</li>
              <li>one number</li>
              <li>
                <a
                  href="https://owasp.org/www-community/password-special-characters"
                  target="_blank"
                  class="link"
                >
                  one special character
                </a>
              </li>
            </ul>
            <!-- TODO: Add a password strength bar -->
            <!-- <meter
                class="full-width"
                min="0"
                low="50"
                max="100"
                value="25"
                optimum="100"
              ></meter> -->
          </div>

          <ng-container *ngIf="authErrorMessage">
            <p class="error">{{ authErrorMessage }}</p>
          </ng-container>
        </div>

        <button
          mat-raised-button
          color="primary"
          class="sign-up-btn"
          (click)="signUpWithEmailAndPassword()"
        >
          Sign up
        </button>
      </form>
    </mat-card-content>

    <div class="section-break-container">
      <div class="section-break-line"></div>
      <span>OR</span>
      <div class="section-break-line"></div>
    </div>

    <div class="social-logins-container">
      <button mat-stroked-button (click)="signUpWithGoogle()">
        <img src="assets/google/google.ico" alt="Google icon" />
        Sign up with Google
      </button>
      <!-- <button mat-button (click)="signInWithFacebook()">
          <img src="assets/facebook.ico" alt="" width="26" height="26" />
          Facebook
        </button>
        <button mat-button (click)="signInWithTwitter()">
          <img src="assets/twitter.ico" alt="" width="26" height="26" />
          Twitter
        </button> -->
    </div>

    <div class="sign-in-link-container">
      <span>Have an account?</span>
      <a routerLink="/login``">Sign in</a>
    </div>
  </mat-card>
</div>
